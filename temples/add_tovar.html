{% extends "base.html" %}

{% block title %}–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä - –°–∫–ª–∞–¥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤{% endblock %}
{% block header %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞{% endblock %}

{% block content %}
<div class="form-container">
    <form method="POST" class="tovar-form">
        <div class="form-grid">
            <div class="form-group">
                <label for="id_kat">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                <select id="id_kat" name="id_kat" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é --</option>
                    {% for kateg in kategs %}
                    <option value="{{ kateg.id_kat }}">{{ kateg.nazv }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="kol">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                <input type="number" id="kol" name="kol" min="0" step="1" required>
            </div>

            <div class="form-group">
                <label for="ob_ypak">–û–±—ä–µ–º —É–ø–∞–∫–æ–≤–∫–∏ *</label>
                <input type="number" id="ob_ypak" name="ob_ypak" min="0" step="0.01" required>
            </div>

            <div class="form-group">
                <label for="ed_izm">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è *</label>
                <select id="ed_izm" name="ed_izm" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –µ–¥–∏–Ω–∏—Ü—É --</option>
                    <option value="–∫–≥">–∫–≥</option>
                    <option value="–ª–∏—Ç—Ä">–ª–∏—Ç—Ä</option>
                    <option value="—à—Ç">—à—Ç</option>
                    <option value="—É–ø–∞–∫–æ–≤–∫–∞">—É–ø–∞–∫–æ–≤–∫–∞</option>
                    <option value="–±–∞–Ω–∫–∞">–±–∞–Ω–∫–∞</option>
                    <option value="–±—É—Ç—ã–ª–∫–∞">–±—É—Ç—ã–ª–∫–∞</option>
                </select>
            </div>

            <div class="form-group">
                <label for="cena">–¶–µ–Ω–∞ (—Ä—É–±) *</label>
                <input type="number" id="cena" name="cena" min="0" step="0.01" required>
            </div>

            <div class="form-group">
                <label for="usl_hr">–£—Å–ª–æ–≤–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è</label>
                <select id="usl_hr" name="usl_hr">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª–æ–≤–∏—è --</option>
                    <option value="–•–æ–ª–æ–¥">–•–æ–ª–æ–¥</option>
                    <option value="–ú–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫">–ú–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫</option>
                    <option value="–°—É—Ö–æ–µ –º–µ—Å—Ç–æ">–°—É—Ö–æ–µ –º–µ—Å—Ç–æ</option>
                    <option value="–ö–æ–º–Ω–∞—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞">–ö–æ–º–Ω–∞—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</option>
                </select>
            </div>

            <div class="form-group">
                <label for="srok_god">–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ *</label>
                <input type="date" id="srok_god" name="srok_god" required>
            </div>

            <div class="form-group">
                <label for="id_skl">–°–∫–ª–∞–¥ *</label>
                <select id="id_skl" name="id_skl" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–ª–∞–¥ --</option>
                    {% for sklad in sklads %}
                    <option value="{{ sklad.id_skl }}">{{ sklad.adres }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="id_post">–ü–æ—Å—Ç–∞–≤—â–∏–∫ *</label>
                <select id="id_post" name="id_post" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ --</option>
                    {% for postav in postavs %}
                    <option value="{{ postav.id_post }}">{{ postav.komp }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            <a href="{{ url_for('tovars') }}" class="btn btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>
</div>

<div class="form-help">
    <h3>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é:</h3>
    <ul>
        <li>–ü–æ–ª—è –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ * –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è</li>
        <li>–£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–æ—á–Ω—ã–π —Å—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞</li>
        <li>–í—ã–±–∏—Ä–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —É—Å–ª–æ–≤–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è</li>
        <li>–£–∫–∞–∑—ã–≤–∞–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞</li>
    </ul>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–∞—Ç—É –∫–∞–∫ —Å–µ–≥–æ–¥–Ω—è
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('srok_god').min = today;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º—ã
        const form = document.querySelector('.tovar-form');
        form.addEventListener('submit', function(e) {
            let valid = true;
            const requiredFields = form.querySelectorAll('[required]');
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    valid = false;
                    field.style.borderColor = 'var(--danger-color)';
                } else {
                    field.style.borderColor = '';
                }
            });
            
            if (!valid) {
                e.preventDefault();
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è!');
            }
        });
    });
</script>
{% endblock %}
