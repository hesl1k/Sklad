{% extends "base.html" %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä - –°–∫–ª–∞–¥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤{% endblock %}
{% block header %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞{% endblock %}

{% block content %}
<div class="form-container">
    <form method="POST" class="tovar-form">
        <div class="form-grid">
            <div class="form-group">
                <label for="id_kat">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                <select id="id_kat" name="id_kat" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é --</option>
                    {% for kateg in kategs %}
                    <option value="{{ kateg.id_kat }}" {% if kateg.id_kat == tovar.id_kat %}selected{% endif %}>
                        {{ kateg.nazv }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="kol">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                <input type="number" id="kol" name="kol" value="{{ tovar.kol }}" min="0" step="1" required>
            </div>

            <div class="form-group">
                <label for="ob_ypak">–û–±—ä–µ–º —É–ø–∞–∫–æ–≤–∫–∏ *</label>
                <input type="number" id="ob_ypak" name="ob_ypak" value="{{ tovar.ob_ypak }}" min="0" step="0.01" required>
            </div>

            <div class="form-group">
                <label for="ed_izm">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è *</label>
                <select id="ed_izm" name="ed_izm" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –µ–¥–∏–Ω–∏—Ü—É --</option>
                    <option value="–∫–≥" {% if tovar.ed_izm == '–∫–≥' %}selected{% endif %}>–∫–≥</option>
                    <option value="–ª–∏—Ç—Ä" {% if tovar.ed_izm == '–ª–∏—Ç—Ä' %}selected{% endif %}>–ª–∏—Ç—Ä</option>
                    <option value="—à—Ç" {% if tovar.ed_izm == '—à—Ç' %}selected{% endif %}>—à—Ç</option>
                    <option value="—É–ø–∞–∫–æ–≤–∫–∞" {% if tovar.ed_izm == '—É–ø–∞–∫–æ–≤–∫–∞' %}selected{% endif %}>—É–ø–∞–∫–æ–≤–∫–∞</option>
                    <option value="–±–∞–Ω–∫–∞" {% if tovar.ed_izm == '–±–∞–Ω–∫–∞' %}selected{% endif %}>–±–∞–Ω–∫–∞</option>
                    <option value="–±—É—Ç—ã–ª–∫–∞" {% if tovar.ed_izm == '–±—É—Ç—ã–ª–∫–∞' %}selected{% endif %}>–±—É—Ç—ã–ª–∫–∞</option>
                </select>
            </div>

            <div class="form-group">
                <label for="cena">–¶–µ–Ω–∞ (—Ä—É–±) *</label>
                <input type="number" id="cena" name="cena" value="{{ tovar.cena }}" min="0" step="0.01" required>
            </div>

            <div class="form-group">
                <label for="usl_hr">–£—Å–ª–æ–≤–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è</label>
                <select id="usl_hr" name="usl_hr">
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª–æ–≤–∏—è --</option>
                    <option value="–•–æ–ª–æ–¥" {% if tovar.usl_hr == '–•–æ–ª–æ–¥' %}selected{% endif %}>–•–æ–ª–æ–¥</option>
                    <option value="–ú–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫" {% if tovar.usl_hr == '–ú–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫' %}selected{% endif %}>–ú–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫</option>
                    <option value="–°—É—Ö–æ–µ –º–µ—Å—Ç–æ" {% if tovar.usl_hr == '–°—É—Ö–æ–µ –º–µ—Å—Ç–æ' %}selected{% endif %}>–°—É—Ö–æ–µ –º–µ—Å—Ç–æ</option>
                    <option value="–ö–æ–º–Ω–∞—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞" {% if tovar.usl_hr == '–ö–æ–º–Ω–∞—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞' %}selected{% endif %}>–ö–æ–º–Ω–∞—Ç–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</option>
                </select>
            </div>

            <div class="form-group">
                <label for="srok_god">–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏ *</label>
                <input type="date" id="srok_god" name="srok_god" 
                       value="{{ tovar.srok_god.strftime('%Y-%m-%d') if tovar.srok_god else '' }}" required>
            </div>

            <div class="form-group">
                <label for="id_skl">–°–∫–ª–∞–¥ *</label>
                <select id="id_skl" name="id_skl" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–ª–∞–¥ --</option>
                    {% for sklad in sklads %}
                    <option value="{{ sklad.id_skl }}" {% if sklad.id_skl == tovar.id_skl %}selected{% endif %}>
                        {{ sklad.adres }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="id_post">–ü–æ—Å—Ç–∞–≤—â–∏–∫ *</label>
                <select id="id_post" name="id_post" required>
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ --</option>
                    {% for postav in postavs %}
                    <option value="{{ postav.id_post }}" {% if postav.id_post == tovar.id_post %}selected{% endif %}>
                        {{ postav.komp }}
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            <a href="{{ url_for('tovars') }}" class="btn btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>
</div>

<div class="current-info">
    <h3>üìã –¢–µ–∫—É—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ:</h3>
    <div class="info-grid">
        <div class="info-item">
            <strong>ID —Ç–æ–≤–∞—Ä–∞:</strong> {{ tovar.id_tov }}
        </div>
        <div class="info-item">
            <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong> {{ tovar.category_name }}
        </div>
        <div class="info-item">
            <strong>–°–∫–ª–∞–¥:</strong> {{ tovar.sklad_adres }}
        </div>
        <div class="info-item">
            <strong>–ü–æ—Å—Ç–∞–≤—â–∏–∫:</strong> {{ tovar.postav_name }}
        </div>
    </div>
</div>
{% endblock %}